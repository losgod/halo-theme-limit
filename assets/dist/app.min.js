function highlightMenu(){const e=document.querySelector("ul#pageMenu").querySelectorAll("a");let o=0;e.forEach((e,t)=>{if(window.location.href.search(e.href)!==-1){o=t}});e[o].classList.add("is-active")}document.querySelector("span.more").onclick=function(){const e=document.querySelector("ul#pageMenu");e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")};function searchController(){const e=document.querySelector("form#search");document.querySelector("a#searchBtn").onclick=function(){const o=document.querySelector("ul#pageMenu");if(o.classList.contains("show")){o.classList.remove("show")}e.classList.remove("hidden");e.querySelector("input").focus()};e.querySelector("div.mask").addEventListener("click",function(){e.classList.add("hidden")})}function codeCopy(){document.querySelectorAll("pre > code").forEach(e=>{e.onclick=function(){try{const o=document.createRange();o.selectNode(e);window.getSelection().removeAllRanges();window.getSelection().addRange(o);document.execCommand("copy");window.getSelection().removeAllRanges();Notice.message("复制成功","success")}catch(e){Notice.message("复制失败，请手动复制","warn")}}})}function initCustomInfo(e){document.querySelector("div#customInfo").innerHTML=marked(e);hljs.initHighlighting();codeCopy()}function getCustomContent(e){const o=localStorage.getItem("readme");if(o!==null&&o!==""){let e=JSON.parse(o);if(Date.now()-e.time<72e5){initCustomInfo(e.source);return}}fetch(e,{method:"GET",mode:"cors"}).then(e=>e.text()).then(e=>{localStorage.setItem("readme",JSON.stringify({source:e,time:Date.now()}));initCustomInfo(e)}).catch(e=>{document.querySelector("section#info").classList.add("hidden");console.error("自定义文本信息请求失败");console.error(e)})}function to(e){if(e===""){return}window.location.href=e}function showRunningTime(e){const o=document.querySelector("span#running");const t=new Date(e),n=new Date;let c=n.getTime()-t.getTime(),r=c/(24*60*60*1e3);o.innerText=Math.floor(r)+"天"}function pageDown(){const e=document.querySelector("div#down");window.addEventListener("scroll",_.debounce(()=>{if(window.scrollY>300){e.classList.add("hidden")}else{e.classList.remove("hidden")}},500));e.addEventListener("click",()=>{window.scrollTo({top:300,behavior:"smooth"})})}function hitokoto(){const e=document.querySelector("div#customTitle").querySelector("h2");const o=sessionStorage.getItem("hitokoto");if(o!==null&&o!==""){e.innerText=o;return}fetch("//v1.hitokoto.cn/?c=c&c=d&c=i&c=k&encode=json",{method:"GET",mode:"cors"}).then(e=>e.json()).then(o=>{const t=`${o.hitokoto} - ${o.from?`《${o.from}》`:""}${o.from_who?o.from_who:""}`;sessionStorage.setItem("hitokoto",t);e.innerText=t}).catch(o=>{console.error("「一言」请求失败");console.error(o);e.innerText="学而不思则罔，思而不学则殆。 - 《论语》 孔子"})}function titleAnimation(){const e=document.querySelector("path#pathTitle");if(e===null){return}const o=e.getTotalLength();e.style.strokeDasharray=o;e.style.strokeDashoffset=o;TweenMax.to(e,5,{strokeDashoffset:0})}function coverPin(){const e=document.querySelector("#welcome");const o=e.querySelector(".cover");new ScrollMagic.Scene({duration:"100%",triggerElement:o,triggerHook:"onLeave"}).setPin(o,{pushFollowers:false}).addTo(controller)}function titleScroll(){const e=document.querySelector("#welcome");const o=e.querySelector(".title");new ScrollMagic.Scene({duration:"20%",triggerElement:o,triggerHook:"onLeave",offset:"-200%"}).setTween(TweenMax.fromTo(o,.2,{opacity:1},{opacity:0})).addTo(controller)}function mainScroll(){const e=document.querySelector("main");new ScrollMagic.Scene({duration:200,triggerElement:e,triggerHook:"onEnter"}).setTween(TweenMax.fromTo(e,.2,{opacity:0},{opacity:1})).addTo(controller)}function postListScroll(){document.querySelector("#articles").querySelectorAll("article").forEach((e,o)=>{new ScrollMagic.Scene({duration:300,triggerElement:e,triggerHook:"onEnter"}).setTween(TweenMax.fromTo(e,.3,{opacity:0,y:"30px"},{opacity:1,y:0})).addTo(controller)})}window.addEventListener("load",()=>{if(document.querySelector("header#welcome")!==null){coverPin();titleScroll();pageDown()}if(document.querySelector("div#customTitle")!==null){titleAnimation();hitokoto()}searchController();mainScroll();codeCopy();highlightMenu()});